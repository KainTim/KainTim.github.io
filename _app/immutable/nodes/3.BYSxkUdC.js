import{d as G,f as O,s as _,e as J,a as U}from"../chunks/-IGDMShe.js";import{o as P}from"../chunks/CXIUv3Zp.js";import{p as H,a1 as E,f,s as L,k as s,l as i,i as n,a2 as K,j as a,a as M,a3 as N,a6 as Q}from"../chunks/CHEiSg6U.js";import{i as B}from"../chunks/B6-AiG01.js";import{e as V,i as X}from"../chunks/BpqQ1ULl.js";import{b as Y}from"../chunks/CUx7CgVJ.js";import{s as Z}from"../chunks/BqBqd16w.js";import{c as I,i as $}from"../chunks/Dj8NwYVE.js";import{C as ee}from"../chunks/aKwgVRcJ.js";import{T as te,H as ie,R as ae}from"../chunks/BOauMsvW.js";var se=(S,e)=>e.onclick(),re=O('<div class="bg-white p-6 border border-gray-300 rounded-lg flex flex-row shadow-md max-w-md mx-auto cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500" role="button" tabindex="0"><div class="flex-shrink-0 bg-blue-100 rounded-xl flex items-center justify-center p-4 mr-6"><img alt="Weather Icon" class="w-24 h-24"/></div> <div class="flex flex-col justify-center space-y-3 text-gray-700"><div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Aufgenommen um:</span> <p class="text-sm"> </p></div> <div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Temperatur:</span> <p class="text-sm"> </p></div> <div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Luftfeuchtigkeit:</span> <p class="text-sm"> </p></div> <div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Regenmenge:</span> <p class="text-sm"> </p></div> <div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Windgeschwindigkeit:</span> <p class="text-sm"> </p></div></div></div>');function ne(S,e){H(e,!0);let v=L("");E(async()=>{f(v,(await m(e.hourly.weather_code[e.index],new Date)).image,!0)});async function m(b,k){const z=await(await fetch("https://gist.githubusercontent.com/stellasphere/9490c195ed2b53c707087c8c2db4ec0c/raw/76b0cb0ef0bfd8a2ec988aa54e30ecd1b483495d/descriptions.json")).json(),R=k.getHours(),A=R>6&&R<20;return z[b][A?"day":"night"]}var d=re();d.__click=[se,e];var u=s(d),C=s(u);i(u);var c=n(u,2),x=s(c),T=n(s(x),2),h=s(T,!0);i(T),i(x);var w=n(x,2),D=n(s(w),2),p=s(D);i(D),i(w);var y=n(w,2),W=n(s(y),2),F=s(W);i(W),i(y);var g=n(y,2),t=n(s(g),2),r=s(t);i(t),i(g);var o=n(g,2),l=n(s(o),2),j=s(l);i(l),i(o),i(c),i(d),K((b,k)=>{Z(C,"src",a(v)),_(h,b),_(p,`${e.hourly.temperature_2m[e.index]??""} ${e.units.temperature_2m??""}`),_(F,`${e.hourly.relative_humidity_2m[e.index]??""} ${e.units.relative_humidity_2m??""}`),_(r,`${k??""} ${(e.ismetric?e.units.rain:"in")??""}`),_(j,`${e.hourly.wind_speed_10m[e.index]??""} ${e.units.wind_speed_10m??""}`)},[()=>new Date(e.hourly.time[e.index]).toLocaleDateString(),()=>e.ismetric?e.hourly.rain[e.index].toFixed(1):(e.hourly.rain[e.index]*.0393701).toFixed(1)]),J("keypress",d,()=>{}),U(S,d),M()}G(["click"]);var oe=O('<div class="bg-gray-50 p-4 border-2 border-gray-500 rounded-md max-w-95"><div class="flex justify-between max-w-full w-sm"><span>Aufgenommen am:</span> <p> </p></div> <div class="flex justify-between max-w-full w-sm"><span>Windrichtung:</span> <p> </p></div> <div class="flex justify-between max-w-full w-sm"><span>Tageshöchsttemperatur:</span> <p> </p></div> <div class="flex justify-between max-w-full w-sm"><span>Tagestiefsttemperatur:</span> <p> </p></div> <div class="flex justify-between max-w-full w-sm"><span>Regenmenge:</span> <p> </p></div></div>');function me(S,e){H(e,!0);function v(r,o){const l={eng:["north","northeast","east","southeast","south","southwest","west","northwest"],deu:["Norden","Nordosten","Osten","Südosten","Süden","Südwesten","Westen","Nordwesten"]};return r=r*8/360,r=Math.round(r,0),r=(r+8)%8,l[o][r]}var m=oe(),d=s(m),u=n(s(d),2),C=s(u,!0);i(u),i(d);var c=n(d,2),x=n(s(c),2),T=s(x,!0);i(x),i(c);var h=n(c,2),w=n(s(h),2),D=s(w);i(w),i(h);var p=n(h,2),y=n(s(p),2),W=s(y);i(y),i(p);var F=n(p,2),g=n(s(F),2),t=s(g);i(g),i(F),i(m),K((r,o,l)=>{_(C,r),_(T,o),_(D,`${e.selectedDay.temp_high??""} ${e.selectedDay.temp_unit??""}`),_(W,`${e.selectedDay.temp_low??""} ${e.selectedDay.temp_unit??""}`),_(t,`${l??""} ${(e.ismetric?e.selectedDay.rain_sum_unit:"in")??""}`)},[()=>new Date(e.selectedDay.time).toLocaleDateString(),()=>v(e.selectedDay.wind_direction,"deu"),()=>e.ismetric?e.selectedDay.rain_sum.toFixed(1):(e.selectedDay.rain_sum*.0393701).toFixed(1)]),U(S,m),M()}var de=O('<div class="fixed inset-0 bg-gray-400/60 flex justify-center items-center z-40 min-h-screen"><div class="relative z-50 bg-gray-100 rounded-sm p-2.5 border-2 border-gray-500"><!> <div class="mt-10"><!></div></div></div>'),ce=O('<div class="flex flex-wrap gap-5 justify-center"></div> <div class="flex flex-wrap justify-center items-center mt-5 gap-x-10"><!> <!> <!></div>',1),le=O('<p class="text-red-600 font-semibold bg-red-100 px-3 py-2 rounded-md max-w-sm mx-auto text-center">Kein Ort Ausgewählt!</p>'),ue=O("<!> <!>",1);function De(S,e){H(e,!0);let v=L(void 0),m=L(void 0),d=L(!1),u=L(void 0),C=L(void 0),c=L(!0);const x=I.subscribe(t=>{f(v,t,!0)}),T=$.subscribe(t=>{f(c,t,!0)});E(async()=>{if(!a(v))return;const t=a(c)?"celsius":"fahrenheit",r=a(c)?"kmh":"mph",o=`https://api.open-meteo.com/v1/forecast?latitude=${a(v).latitude}&longitude=${a(v).longitude}&forecast_days=3&hourly=weather_code,temperature_2m,relative_humidity_2m,rain,wind_speed_10m&daily=rain_sum,wind_direction_10m_dominant,temperature_2m_min,temperature_2m_max&temperature_unit=${t}&wind_speed_unit=${r}&timezone=Europe%2FBerlin`;f(m,await(await fetch(o)).json(),!0)}),E(()=>{a(d)?document.addEventListener("mousedown",h):document.removeEventListener("mousedown",h)});function h(t){a(u)&&!a(u).contains(t.target)&&f(d,!1)}function w(t,r,o){return{rain_sum:t.rain_sum[o],time:t.time[o],wind_direction:t.wind_direction_10m_dominant[o],rain_sum_unit:r.rain_sum,time_unit:r.time,wind_direction_units:r.wind_direction_10m_dominant,temp_high:t.temperature_2m_max[o],temp_low:t.temperature_2m_min[o],temp_unit:r.temperature_2m_max}}P(()=>{x(),T()});var D=ue(),p=N(D);{var y=t=>{var r=de(),o=s(r),l=s(o);ee(l,{onclick:()=>f(d,!1)});var j=n(l,2),b=s(j);me(b,{get selectedDay(){return a(C)},get ismetric(){return a(c)}}),i(j),i(o),Y(o,k=>f(u,k),()=>a(u)),i(r),U(t,r)};B(p,t=>{a(d)&&t(y)})}var W=n(p,2);{var F=t=>{var r=ce(),o=N(r);V(o,21,()=>a(m).hourly.time.filter((z,R)=>R%24==0),X,(z,R,A)=>{const q=Q(()=>a(m).hourly.time.indexOf(a(R)));ne(z,{get hourly(){return a(m).hourly},get daily(){return a(m).daily[A]},get index(){return a(q)},get units(){return a(m).hourly_units},get dailyunits(){return a(m).hourly_units},get ismetric(){return a(c)},onclick:()=>{f(C,w(a(m).daily,a(m).daily_units,A),!0),f(d,!0)}})}),i(o);var l=n(o,2),j=s(l);te(j,{forecastDays:"3",get ismetric(){return a(c)}});var b=n(j,2);ie(b,{forecastDays:"3"});var k=n(b,2);ae(k,{forecastDays:"3",get ismetric(){return a(c)}}),i(l),U(t,r)},g=t=>{var r=le();U(t,r)};B(W,t=>{a(v)&&a(m)?t(F):t(g,!1)})}U(S,D),M()}export{De as component};
