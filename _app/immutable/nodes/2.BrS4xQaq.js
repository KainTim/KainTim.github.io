import{f as S,s as p,a as w,c as z}from"../chunks/-IGDMShe.js";import{o as B}from"../chunks/CXIUv3Zp.js";import{p as F,a1 as R,f as y,s as j,k as s,l as a,i,a2 as E,j as r,a as M,a3 as G}from"../chunks/CHEiSg6U.js";import{s as J}from"../chunks/qfjVf3oj.js";import{i as N}from"../chunks/B6-AiG01.js";import{T as P,H as Q,R as V}from"../chunks/BOauMsvW.js";import{s as X}from"../chunks/BqBqd16w.js";import{i as Y,c as A}from"../chunks/Dj8NwYVE.js";var Z=S('<div class="bg-white p-6 border border-gray-300 rounded-lg flex flex-row shadow-md mx-auto"><div class="flex-shrink-0 bg-blue-100 rounded-xl flex items-center justify-center p-4 mr-6"><img alt="Weather Icon" class="w-24 h-24"/></div> <div class="flex flex-col justify-center space-y-3 text-gray-700"><div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Aufgenommen um:</span> <p class="text-sm"> </p></div> <div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Temperatur:</span> <p class="text-sm"> </p></div> <div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Luftfeuchtigkeit:</span> <p class="text-sm"> </p></div> <div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Regenmenge:</span> <p class="text-sm"> </p></div> <div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Windgeschwindigkeit:</span> <p class="text-sm"> </p></div></div></div>');function $(L,e){F(e,!0);let o=j(void 0);R(async()=>{y(o,(await l(e.current.weather_code,new Date)).image,!0)});async function l(D,U){const O=await(await fetch("https://gist.githubusercontent.com/stellasphere/9490c195ed2b53c707087c8c2db4ec0c/raw/76b0cb0ef0bfd8a2ec988aa54e30ecd1b483495d/descriptions.json")).json(),H=U.getHours(),q=H>6&&H<20;return O[D][q?"day":"night"]}var n=Z(),f=s(n),k=s(f);a(f);var _=i(f,2),d=s(_),h=i(s(d),2),W=s(h,!0);a(h),a(d);var v=i(d,2),t=i(s(v),2),c=s(t);a(t),a(v);var m=i(v,2),x=i(s(m),2),g=s(x);a(x),a(m);var u=i(m,2),b=i(s(u),2),I=s(b);a(b),a(u);var T=i(u,2),C=i(s(T),2),K=s(C);a(C),a(T),a(_),a(n),E((D,U)=>{X(k,"src",r(o)),p(W,D),p(c,`${e.current.temperature_2m??""} ${e.units.temperature_2m??""}`),p(g,`${e.current.relative_humidity_2m??""} ${e.units.relative_humidity_2m??""}`),p(I,`${U??""} ${(e.ismetric?e.units.rain:"in")??""}`),p(K,`${e.current.wind_speed_10m??""} ${e.units.wind_speed_10m??""}`)},[()=>new Date(e.current.time).toLocaleString(),()=>e.ismetric?e.current.rain.toFixed(1):(e.current.rain*.0393701).toFixed(1)]),w(L,n),M()}var ee=S('<div class="flex flex-col items-center justify-center"><!> <div class="flex w-full flex-wrap gap-x-10 items-center justify-center"><!> <!> <!></div></div>'),te=S('<p class="text-red-600 font-semibold bg-red-100 px-3 py-2 rounded-md max-w-sm mx-auto text-center">Kein Ort Ausgew√§hlt!</p>');function le(L,e){F(e,!0);let o=j(void 0),l=j(void 0),n=j(!0);const f=Y.subscribe(t=>{y(n,t,!0)}),k=A.subscribe(t=>{y(o,t,!0)});R(()=>{console.log("currentLocation changed",J(r(o))),A.set(r(o))}),R(async()=>{r(o)&&y(l,await _(r(o)),!0)});async function _(t){const c=r(n)?"celsius":"fahrenheit",m=r(n)?"kmh":"mph";return(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${t.latitude}&longitude=${t.longitude}&current=temperature_2m,relative_humidity_2m,rain,wind_speed_10m,weather_code&temperature_unit=${c}&wind_speed_unit=${m}`)).json()}B(()=>{k(),f()});var d=z(),h=G(d);{var W=t=>{var c=ee(),m=s(c);$(m,{get current(){return r(l).current},get units(){return r(l).current_units},get ismetric(){return r(n)}});var x=i(m,2),g=s(x);P(g,{get ismetric(){return r(n)}});var u=i(g,2);Q(u,{});var b=i(u,2);V(b,{get ismetric(){return r(n)}}),a(x),a(c),w(t,c)},v=t=>{var c=te();w(t,c)};N(h,t=>{r(l)?t(W):t(v,!1)})}w(L,d),M()}export{le as component};
