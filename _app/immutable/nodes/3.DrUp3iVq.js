import{d as G,f as T,s as b,e as J,a as R}from"../chunks/qsjj-_BR.js";import{o as P}from"../chunks/05zyj1Cr.js";import{p as H,a0 as E,f as _,s as L,k as s,l as a,i as r,a1 as K,j as t,a as M,a2 as N,a5 as Q}from"../chunks/BOOBJ6gn.js";import{i as B}from"../chunks/DSh7sEGW.js";import{e as V,i as X}from"../chunks/uhJyW_1i.js";import{b as Y}from"../chunks/Eghak-IW.js";import{s as Z}from"../chunks/BmQQ_5LG.js";import{c as I,i as $}from"../chunks/DgurLFuQ.js";import{C as ee}from"../chunks/Bv_lvPSb.js";import{T as te,H as ie,R as ae}from"../chunks/BMjwmMSg.js";var se=(S,e)=>e.onclick(),re=T('<div class="bg-white p-6 border border-gray-300 rounded-lg flex flex-row shadow-md max-w-md mx-auto cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500" role="button" tabindex="0"><div class="flex-shrink-0 bg-blue-100 rounded-xl flex items-center justify-center p-4 mr-6"><img alt="Weather Icon" class="w-24 h-24"/></div> <div class="flex flex-col justify-center space-y-3 text-gray-700"><div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Aufgenommen um:</span> <p class="text-sm"> </p></div> <div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Temperatur:</span> <p class="text-sm"> </p></div> <div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Luftfeuchtigkeit:</span> <p class="text-sm"> </p></div> <div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Regenmenge:</span> <p class="text-sm"> </p></div> <div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Windgeschwindigkeit:</span> <p class="text-sm"> </p></div></div></div>');function ne(S,e){H(e,!0);let v=L("");E(async()=>{_(v,(await n(e.hourly.weather_code[e.index],new Date)).image,!0)});async function n(g,k){const O=await(await fetch("https://gist.githubusercontent.com/stellasphere/9490c195ed2b53c707087c8c2db4ec0c/raw/76b0cb0ef0bfd8a2ec988aa54e30ecd1b483495d/descriptions.json")).json(),F=k.getHours(),z=F>6&&F<20;return O[g][z?"day":"night"]}var c=re();c.__click=[se,e];var u=s(c),C=s(u);a(u);var m=r(u,2),x=s(m),W=r(s(x),2),p=s(W,!0);a(W),a(x);var h=r(x,2),D=r(s(h),2),l=s(D);a(D),a(h);var f=r(h,2),y=r(s(f),2),A=s(y);a(y),a(f);var U=r(f,2),i=r(s(U),2),o=s(i);a(i),a(U);var d=r(U,2),w=r(s(d),2),j=s(w);a(w),a(d),a(m),a(c),K((g,k)=>{Z(C,"src",t(v)),b(p,g),b(l,`${e.hourly.temperature_2m[e.index]??""} ${e.units.temperature_2m??""}`),b(A,`${e.hourly.relative_humidity_2m[e.index]??""} ${e.units.relative_humidity_2m??""}`),b(o,`${k??""} ${(e.ismetric?e.units.rain:"in")??""}`),b(j,`${e.hourly.wind_speed_10m[e.index]??""} ${e.units.wind_speed_10m??""}`)},[()=>new Date(e.hourly.time[e.index]).toLocaleDateString(),()=>e.ismetric?e.hourly.rain[e.index].toFixed(1):(e.hourly.rain[e.index]*.0393701).toFixed(1)]),J("keypress",c,()=>{}),R(S,c),M()}G(["click"]);var oe=T('<div class="bg-gray-50 p-4 border-2 border-gray-500 rounded-md max-w-95"><div class="flex justify-between max-w-full w-sm"><span>Aufgenommen am:</span> <p> </p></div> <div class="flex justify-between max-w-full w-sm"><span>Windrichtung:</span> <p> </p></div> <div class="flex justify-between max-w-full w-sm"><span>Regenmenge:</span> <p> </p></div></div>');function de(S,e){H(e,!0);function v(l,f){const y={eng:["north","northeast","east","southeast","south","southwest","west","northwest"],deu:["Norden","Nordosten","Osten","S체dosten","S체den","S체dwesten","Westen","Nordwesten"]};return l=l*8/360,l=Math.round(l,0),l=(l+8)%8,y[f][l]}var n=oe(),c=s(n),u=r(s(c),2),C=s(u,!0);a(u),a(c);var m=r(c,2),x=r(s(m),2),W=s(x,!0);a(x),a(m);var p=r(m,2),h=r(s(p),2),D=s(h);a(h),a(p),a(n),K((l,f,y)=>{b(C,l),b(W,f),b(D,`${y??""} ${(e.ismetric?rain_sum_unit.rain:"in")??""}`)},[()=>new Date(e.selectedDay.time).toLocaleDateString(),()=>v(e.selectedDay.wind_direction,"deu"),()=>e.ismetric?e.selectedDay.rain_sum.toFixed(1):(e.selectedDay.rain_sum*.0393701).toFixed(1)]),R(S,n),M()}var ce=T('<div class="fixed inset-0 bg-gray-400/60 flex justify-center items-center z-40 min-h-screen"><div class="relative z-50 bg-gray-100 rounded-sm p-2.5 border-2 border-gray-500"><!> <div class="mt-10"><!></div></div></div>'),le=T('<div class="flex flex-wrap gap-5 justify-center"></div> <div class="flex flex-wrap justify-center items-center mt-5 gap-x-10"><!> <!> <!></div>',1),me=T('<p class="text-red-600 font-semibold bg-red-100 px-3 py-2 rounded-md max-w-sm mx-auto text-center">Kein Ort Ausgew채hlt!</p>'),ue=T("<!> <!>",1);function De(S,e){H(e,!0);let v=L(void 0),n=L(void 0),c=L(!1),u=L(void 0),C=L(void 0),m=L(!0);const x=I.subscribe(i=>{_(v,i,!0)}),W=$.subscribe(i=>{_(m,i,!0)});E(async()=>{if(!t(v))return;const i=t(m)?"celsius":"fahrenheit",o=t(m)?"kmh":"mph",d=`https://api.open-meteo.com/v1/forecast?latitude=${t(v).latitude}&longitude=${t(v).longitude}&forecast_days=3&hourly=weather_code,temperature_2m,relative_humidity_2m,rain,wind_speed_10m&daily=rain_sum,wind_direction_10m_dominant&temperature_unit=${i}&wind_speed_unit=${o}&timezone=Europe%2FBerlin`;_(n,await(await fetch(d)).json(),!0)}),E(()=>{t(c)?document.addEventListener("mousedown",p):document.removeEventListener("mousedown",p)});function p(i){t(u)&&!t(u).contains(i.target)&&_(c,!1)}function h(i,o,d){return{rain_sum:i.rain_sum[d],time:i.time[d],wind_direction:i.wind_direction_10m_dominant[d],rain_sum_unit:o.rain_sum,time_unit:o.time,wind_direction_units:o.wind_direction_10m_dominant}}P(()=>{x(),W()});var D=ue(),l=N(D);{var f=i=>{var o=ce(),d=s(o),w=s(d);ee(w,{onclick:()=>_(c,!1)});var j=r(w,2),g=s(j);de(g,{get selectedDay(){return t(C)}}),a(j),a(d),Y(d,k=>_(u,k),()=>t(u)),a(o),R(i,o)};B(l,i=>{t(c)&&i(f)})}var y=r(l,2);{var A=i=>{var o=le(),d=N(o);V(d,21,()=>t(n).hourly.time.filter((O,F)=>F%24==0),X,(O,F,z)=>{const q=Q(()=>t(n).hourly.time.indexOf(t(F)));ne(O,{get hourly(){return t(n).hourly},get daily(){return t(n).daily[z]},get index(){return t(q)},get units(){return t(n).hourly_units},get dailyunits(){return t(n).hourly_units},get ismetric(){return t(m)},onclick:()=>{_(C,h(t(n).daily,t(n).daily_units,z),!0),_(c,!0)}})}),a(d);var w=r(d,2),j=s(w);te(j,{forecastDays:"3",get ismetric(){return t(m)}});var g=r(j,2);ie(g,{forecastDays:"3"});var k=r(g,2);ae(k,{forecastDays:"3",get ismetric(){return t(m)}}),a(w),R(i,o)},U=i=>{var o=me();R(i,o)};B(y,i=>{t(v)&&t(n)?i(A):i(U,!1)})}R(S,D),M()}export{De as component};
