import{d as G,f as T,s as w,e as J,a as R}from"../chunks/DfXbaCzw.js";import{p as H,a as A,b as h,d as W,f as a,g as t,h as r,t as U,i as s,j as N,k as F,a4 as P}from"../chunks/Dzbd3Bxo.js";import{i as K}from"../chunks/1q3pTDcc.js";import{C as Q,e as V,i as X}from"../chunks/CYIIu8wE.js";import{b as Y}from"../chunks/Ccr5Mmg-.js";import{s as Z,c as M}from"../chunks/DkqaGYxc.js";import{T as I,H as $,R as ee}from"../chunks/FOVlq7Dh.js";var te=(k,e)=>e.onclick(),ae=T('<div class="bg-white p-6 border border-gray-300 rounded-lg flex flex-row shadow-md max-w-md mx-auto cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500" role="button" tabindex="0"><div class="flex-shrink-0 bg-blue-100 rounded-xl flex items-center justify-center p-4 mr-6"><img alt="Weather Icon" class="w-24 h-24"/></div> <div class="flex flex-col justify-center space-y-3 text-gray-700"><div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Aufgenommen um:</span> <p class="text-sm"> </p></div> <div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Temperatur:</span> <p class="text-sm"> </p></div> <div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Luftfeuchtigkeit:</span> <p class="text-sm"> </p></div> <div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Regenmenge:</span> <p class="text-sm"> </p></div> <div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Windgeschwindigkeit:</span> <p class="text-sm"> </p></div></div></div>');function ie(k,e){H(e,!0);let m=W("");A(async()=>{h(m,(await n(e.hourly.weather_code[e.index],new Date)).image,!0)});async function n(j,z){const E=await(await fetch("https://gist.githubusercontent.com/stellasphere/9490c195ed2b53c707087c8c2db4ec0c/raw/76b0cb0ef0bfd8a2ec988aa54e30ecd1b483495d/descriptions.json")).json(),B=z.getHours(),q=B>6&&B<20;return E[j][q?"day":"night"]}var o=ae();o.__click=[te,e];var u=a(o),C=a(u);t(u);var v=r(u,2),_=a(v),p=r(a(_),2),g=a(p,!0);t(p),t(_);var x=r(_,2),L=r(a(x),2),c=a(L);t(L),t(x);var f=r(x,2),i=r(a(f),2),l=a(i);t(i),t(f);var d=r(f,2),y=r(a(d),2),b=a(y);t(y),t(d);var D=r(d,2),S=r(a(D),2),O=a(S);t(S),t(D),t(v),t(o),U(j=>{Z(C,"src",s(m)),w(g,j),w(c,`${e.hourly.temperature_2m[e.index]??""} ${e.units.temperature_2m??""}`),w(l,`${e.hourly.relative_humidity_2m[e.index]??""} ${e.units.relative_humidity_2m??""}`),w(b,`${e.hourly.rain[e.index]??""} ${e.units.rain??""}`),w(O,`${e.hourly.wind_speed_10m[e.index]??""} ${e.units.wind_speed_10m??""}`)},[()=>new Date(e.hourly.time[e.index]).toLocaleDateString()]),J("keypress",o,()=>{}),R(k,o),N()}G(["click"]);var se=T('<div class="bg-gray-50 p-4 border-2 border-gray-500 rounded-md max-w-95"><div class="flex justify-between max-w-full w-sm"><span>Aufgenommen am:</span> <p> </p></div> <div class="flex justify-between max-w-full w-sm"><span>Windrichtung:</span> <p> </p></div> <div class="flex justify-between max-w-full w-sm"><span>Regenmenge:</span> <p> </p></div></div>');function re(k,e){H(e,!0);function m(c,f){const i={eng:["north","northeast","east","southeast","south","southwest","west","northwest"],deu:["Norden","Nordosten","Osten","S체dosten","S체den","S체dwesten","Westen","Nordwesten"]};return c=c*8/360,c=Math.round(c,0),c=(c+8)%8,i[f][c]}var n=se(),o=a(n),u=r(a(o),2),C=a(u,!0);t(u),t(o);var v=r(o,2),_=r(a(v),2),p=a(_,!0);t(_),t(v);var g=r(v,2),x=r(a(g),2),L=a(x);t(x),t(g),t(n),U((c,f)=>{w(C,c),w(p,f),w(L,`${e.selectedDay.rain_sum??""} ${e.selectedDay.rain_sum_unit??""}`)},[()=>new Date(e.selectedDay.time).toLocaleDateString(),()=>m(e.selectedDay.wind_direction,"deu")]),R(k,n),N()}var ne=T('<div class="fixed inset-0 bg-gray-400/60 flex justify-center items-center z-40 min-h-screen"><div class="relative z-50 bg-gray-100 rounded-sm p-2.5 border-2 border-gray-500"><!> <div class="mt-10"><!></div></div></div>'),oe=T('<div class="flex flex-wrap gap-5 justify-center"></div> <div class="flex flex-wrap justify-center items-center mt-5 gap-x-10"><!> <!> <!></div>',1),de=T('<p class="text-red-600 font-semibold bg-red-100 px-3 py-2 rounded-md max-w-sm mx-auto text-center">Kein Ort Ausgew채hlt!</p>'),le=T("<!> <!>",1);function ye(k,e){H(e,!0);let m=W(void 0),n=W(void 0),o=W(!1),u=W(void 0),C=W(void 0);A(()=>{M.set(s(m))}),M.subscribe(i=>{h(m,i,!0)}),A(async()=>{s(m)&&h(n,await(await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${s(m).latitude}&longitude=${s(m).longitude}&forecast_days=3&hourly=weather_code,temperature_2m,relative_humidity_2m,rain,wind_speed_10m&daily=rain_sum,wind_direction_10m_dominant&timezone=Europe%2FBerlin`)).json(),!0)}),A(()=>{s(o)?document.addEventListener("mousedown",v):document.removeEventListener("mousedown",v)});function v(i){s(u)&&!s(u).contains(i.target)&&h(o,!1)}function _(i,l,d){return{rain_sum:i.rain_sum[d],time:i.time[d],wind_direction:i.wind_direction_10m_dominant[d],rain_sum_unit:l.rain_sum,time_unit:l.time,wind_direction_units:l.wind_direction_10m_dominant}}var p=le(),g=F(p);{var x=i=>{var l=ne(),d=a(l),y=a(d);Q(y,{onclick:()=>h(o,!1)});var b=r(y,2),D=a(b);re(D,{get selectedDay(){return s(C)}}),t(b),t(d),Y(d,S=>h(u,S),()=>s(u)),t(l),R(i,l)};K(g,i=>{s(o)&&i(x)})}var L=r(g,2);{var c=i=>{var l=oe(),d=F(l);V(d,21,()=>s(n).hourly.time.filter((O,j)=>j%24==0),X,(O,j,z)=>{const E=P(()=>s(n).hourly.time.indexOf(s(j)));ie(O,{get hourly(){return s(n).hourly},get daily(){return s(n).daily[z]},get index(){return s(E)},get units(){return s(n).hourly_units},get dailyunits(){return s(n).hourly_units},onclick:()=>{h(C,_(s(n).daily,s(n).daily_units,z),!0),h(o,!0)}})}),t(d);var y=r(d,2),b=a(y);I(b,{forecastDays:"3"});var D=r(b,2);$(D,{forecastDays:"3"});var S=r(D,2);ee(S,{forecastDays:"3"}),t(y),R(i,l)},f=i=>{var l=de();R(i,l)};K(L,i=>{s(m)&&s(n)?i(c):i(f,!1)})}R(k,p),N()}export{ye as component};
