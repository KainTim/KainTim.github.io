import{d as G,f as z,s as _,e as J,a as O}from"../chunks/-IGDMShe.js";import{o as P}from"../chunks/CXIUv3Zp.js";import{p as H,a1 as E,f as x,s as L,k as s,l as i,i as n,a2 as K,j as a,a as M,a3 as N,a6 as Q}from"../chunks/CHEiSg6U.js";import{i as B}from"../chunks/B6-AiG01.js";import{e as V,i as X}from"../chunks/BpqQ1ULl.js";import{b as Y}from"../chunks/CUx7CgVJ.js";import{s as Z}from"../chunks/BqBqd16w.js";import{c as I,i as $}from"../chunks/Dj8NwYVE.js";import{C as ee}from"../chunks/BUp8G6bi.js";import{T as te,H as ie,R as ae}from"../chunks/BOauMsvW.js";var se=(S,e)=>e.onclick(),re=z('<div class="bg-white p-6 border border-gray-300 rounded-lg flex flex-row shadow-md mx-auto cursor-pointer focus:outline-none focus:ring-2 focus:ring-blue-500" role="button" tabindex="0"><div class="flex-shrink-0 bg-blue-100 rounded-xl flex items-center justify-center p-4 mr-6"><img alt="Weather Icon" class="w-24 h-24"/></div> <div class="flex flex-col justify-center space-y-3 text-gray-700"><div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Aufgenommen um:</span> <p class="text-sm"> </p></div> <div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Temperatur:</span> <p class="text-sm"> </p></div> <div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Luftfeuchtigkeit:</span> <p class="text-sm"> </p></div> <div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Regenmenge:</span> <p class="text-sm"> </p></div> <div class="flex flex-col sm:flex-row sm:justify-between sm:space-x-4"><span class="font-semibold text-sm">Windgeschwindigkeit:</span> <p class="text-sm"> </p></div></div></div>');function ne(S,e){H(e,!0);let v=L("");E(async()=>{x(v,(await d(e.hourly.weather_code[e.index],new Date)).image,!0)});async function d(D,k){const R=await(await fetch("https://gist.githubusercontent.com/stellasphere/9490c195ed2b53c707087c8c2db4ec0c/raw/76b0cb0ef0bfd8a2ec988aa54e30ecd1b483495d/descriptions.json")).json(),U=k.getHours(),A=U>6&&U<20;return R[D][A?"day":"night"]}var m=re();m.__click=[se,e];var u=s(m),C=s(u);i(u);var l=n(u,2),w=s(l),T=n(s(w),2),g=s(T);i(T),i(w);var h=n(w,2),j=n(s(h),2),y=s(j);i(j),i(h);var p=n(h,2),W=n(s(p),2),F=s(W);i(W),i(p);var b=n(p,2),t=n(s(b),2),r=s(t);i(t),i(b);var o=n(b,2),c=n(s(o),2),f=s(c);i(c),i(o),i(l),i(m),K((D,k,R)=>{Z(C,"src",a(v)),_(g,`${D??""}, ${k??""}`),_(y,`${e.hourly.temperature_2m[e.index]??""} ${e.units.temperature_2m??""}`),_(F,`${e.hourly.relative_humidity_2m[e.index]??""} ${e.units.relative_humidity_2m??""}`),_(r,`${R??""} ${(e.ismetric?e.units.rain:"in")??""}`),_(f,`${e.hourly.wind_speed_10m[e.index]??""} ${e.units.wind_speed_10m??""}`)},[()=>new Date(e.hourly.time[e.index]).toLocaleDateString(),()=>new Date(e.hourly.time[e.index]).toLocaleString(navigator.language,{weekday:"long"}),()=>e.ismetric?e.hourly.rain[e.index].toFixed(1):(e.hourly.rain[e.index]*.0393701).toFixed(1)]),J("keypress",m,()=>{}),O(S,m),M()}G(["click"]);var oe=z('<div class="bg-gray-50 p-4 border-2 border-gray-500 rounded-md max-w-95"><div class="flex justify-between max-w-full w-sm"><span>Aufgenommen am:</span> <p> </p></div> <div class="flex justify-between max-w-full w-sm"><span>Windrichtung:</span> <p> </p></div> <div class="flex justify-between max-w-full w-sm"><span>Tageshöchsttemperatur:</span> <p> </p></div> <div class="flex justify-between max-w-full w-sm"><span>Tagestiefsttemperatur:</span> <p> </p></div> <div class="flex justify-between max-w-full w-sm"><span>Regenmenge:</span> <p> </p></div></div>');function de(S,e){H(e,!0);function v(r,o){const c={eng:["north","northeast","east","southeast","south","southwest","west","northwest"],deu:["Norden","Nordosten","Osten","Südosten","Süden","Südwesten","Westen","Nordwesten"]};return r=r*8/360,r=Math.round(r,0),r=(r+8)%8,c[o][r]}var d=oe(),m=s(d),u=n(s(m),2),C=s(u);i(u),i(m);var l=n(m,2),w=n(s(l),2),T=s(w,!0);i(w),i(l);var g=n(l,2),h=n(s(g),2),j=s(h);i(h),i(g);var y=n(g,2),p=n(s(y),2),W=s(p);i(p),i(y);var F=n(y,2),b=n(s(F),2),t=s(b);i(b),i(F),i(d),K((r,o,c,f)=>{_(C,`${r??""}, ${o??""}`),_(T,c),_(j,`${e.selectedDay.temp_high??""} ${e.selectedDay.temp_unit??""}`),_(W,`${e.selectedDay.temp_low??""} ${e.selectedDay.temp_unit??""}`),_(t,`${f??""} ${(e.ismetric?e.selectedDay.rain_sum_unit:"in")??""}`)},[()=>new Date(e.selectedDay.time).toLocaleDateString(),()=>new Date(e.selectedDay.time).toLocaleString(navigator.language,{weekday:"long"}),()=>v(e.selectedDay.wind_direction,"deu"),()=>e.ismetric?e.selectedDay.rain_sum.toFixed(1):(e.selectedDay.rain_sum*.0393701).toFixed(1)]),O(S,d),M()}var me=z('<div class="fixed inset-0 bg-gray-400/60 flex justify-center items-center z-40 min-h-screen"><div class="relative z-50 bg-gray-100 rounded-sm p-2.5 border-2 border-gray-500"><!> <div class="mt-10"><!></div></div></div>'),le=z('<div class="flex flex-wrap gap-5 justify-center"></div> <div class="flex flex-wrap justify-center items-center mt-5 gap-x-10"><!> <!> <!></div>',1),ce=z('<p class="text-red-600 font-semibold bg-red-100 px-3 py-2 rounded-md max-w-sm mx-auto text-center">Kein Ort Ausgewählt!</p>'),ue=z("<!> <!>",1);function De(S,e){H(e,!0);let v=L(void 0),d=L(void 0),m=L(!1),u=L(void 0),C=L(void 0),l=L(!0);const w=I.subscribe(t=>{x(v,t,!0)}),T=$.subscribe(t=>{x(l,t,!0)});E(async()=>{if(!a(v))return;const t=a(l)?"celsius":"fahrenheit",r=a(l)?"kmh":"mph",o=`https://api.open-meteo.com/v1/forecast?latitude=${a(v).latitude}&longitude=${a(v).longitude}&forecast_days=3&hourly=weather_code,temperature_2m,relative_humidity_2m,rain,wind_speed_10m&daily=rain_sum,wind_direction_10m_dominant,temperature_2m_min,temperature_2m_max&temperature_unit=${t}&wind_speed_unit=${r}&timezone=Europe%2FBerlin`;x(d,await(await fetch(o)).json(),!0)}),E(()=>{a(m)?document.addEventListener("mousedown",g):document.removeEventListener("mousedown",g)});function g(t){a(u)&&!a(u).contains(t.target)&&x(m,!1)}function h(t,r,o){return{rain_sum:t.rain_sum[o],time:t.time[o],wind_direction:t.wind_direction_10m_dominant[o],rain_sum_unit:r.rain_sum,time_unit:r.time,wind_direction_units:r.wind_direction_10m_dominant,temp_high:t.temperature_2m_max[o],temp_low:t.temperature_2m_min[o],temp_unit:r.temperature_2m_max}}P(()=>{w(),T()});var j=ue(),y=N(j);{var p=t=>{var r=me(),o=s(r),c=s(o);ee(c,{onclick:()=>x(m,!1)});var f=n(c,2),D=s(f);de(D,{get selectedDay(){return a(C)},get ismetric(){return a(l)}}),i(f),i(o),Y(o,k=>x(u,k),()=>a(u)),i(r),O(t,r)};B(y,t=>{a(m)&&t(p)})}var W=n(y,2);{var F=t=>{var r=le(),o=N(r);V(o,21,()=>a(d).hourly.time.filter((R,U)=>U%24==0),X,(R,U,A)=>{const q=Q(()=>a(d).hourly.time.indexOf(a(U)));ne(R,{get hourly(){return a(d).hourly},get daily(){return a(d).daily[A]},get index(){return a(q)},get units(){return a(d).hourly_units},get dailyunits(){return a(d).hourly_units},get ismetric(){return a(l)},onclick:()=>{x(C,h(a(d).daily,a(d).daily_units,A),!0),x(m,!0)}})}),i(o);var c=n(o,2),f=s(c);te(f,{forecastDays:"3",get ismetric(){return a(l)}});var D=n(f,2);ie(D,{forecastDays:"3"});var k=n(D,2);ae(k,{forecastDays:"3",get ismetric(){return a(l)}}),i(c),O(t,r)},b=t=>{var r=ce();O(t,r)};B(W,t=>{a(v)&&a(d)?t(F):t(b,!1)})}O(S,j),M()}export{De as component};
